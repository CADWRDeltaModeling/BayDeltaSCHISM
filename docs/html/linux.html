
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Linux Hints for SCHISM &#8212; Bay-Delta SCHISM</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Calibration and References" href="calibration.html" />
    <link rel="prev" title="Resources and Manuals for Bay-Delta SCHISM" href="learning.html" /> 
  </head><body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo6.png" border="0" alt="Bay-Delta SCHISM"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="calibration.html" title="Calibration and References"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="learning.html" title="Resources and Manuals for Bay-Delta SCHISM"
             accesskey="P">previous</a> |</li>
        <li><a href="https://water.ca.gov/Library/Modeling-and-Analysis/Bay-Delta-Region-models-and-tools"> Delta Modeling Section</a>|&nbsp;</li>
        <li><a href="https://github.com/CADWRDeltaModeling">GitHub</a>|&nbsp;</li>
        <li><a href="search.html">Search</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="learning.html" accesskey="U">Resources and Manuals for Bay-Delta SCHISM</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Linux Hints for SCHISM</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/dwr_logo_small.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Linux Hints for SCHISM</a><ul>
<li><a class="reference internal" href="#using-linux-from-windows">Using Linux from Windows</a><ul>
<li><a class="reference internal" href="#basic-connection">Basic connection</a></li>
<li><a class="reference internal" href="#copying-files">Copying files</a></li>
<li><a class="reference internal" href="#xwindow-emulation">XWindow Emulation</a></li>
<li><a class="reference internal" href="#all-in-one-mobaxterm">All-in-one: MobaXTerm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copying-a-run-safely">Copying a Run Safely</a><ul>
<li><a class="reference internal" href="#special-case-remote-computer-using-rsa-keys">Special Case: Remote Computer Using RSA Keys</a></li>
</ul>
</li>
<li><a class="reference internal" href="#symbolic-links">Symbolic links</a></li>
<li><a class="reference internal" href="#archives-and-tarballs">Archives and Tarballs</a></li>
<li><a class="reference internal" href="#essential-commands-in-a-schism-context">Essential commands in a SCHISM context</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="learning.html"
                          title="previous chapter">Resources and Manuals for Bay-Delta SCHISM</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="calibration.html"
                          title="next chapter">Calibration and References</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/linux.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="linux-hints-for-schism">
<h1><a class="toc-backref" href="#id3" role="doc-backlink">Linux Hints for SCHISM</a><a class="headerlink" href="#linux-hints-for-schism" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#linux-hints-for-schism" id="id3">Linux Hints for SCHISM</a></p>
<ul>
<li><p><a class="reference internal" href="#using-linux-from-windows" id="id4">Using Linux from Windows</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-connection" id="id5">Basic connection</a></p></li>
<li><p><a class="reference internal" href="#copying-files" id="id6">Copying files</a></p></li>
<li><p><a class="reference internal" href="#xwindow-emulation" id="id7">XWindow Emulation</a></p></li>
<li><p><a class="reference internal" href="#all-in-one-mobaxterm" id="id8">All-in-one: MobaXTerm</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#copying-a-run-safely" id="id9">Copying a Run Safely</a></p>
<ul>
<li><p><a class="reference internal" href="#special-case-remote-computer-using-rsa-keys" id="id10">Special Case: Remote Computer Using RSA Keys</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#symbolic-links" id="id11">Symbolic links</a></p></li>
<li><p><a class="reference internal" href="#archives-and-tarballs" id="id12">Archives and Tarballs</a></p></li>
<li><p><a class="reference internal" href="#essential-commands-in-a-schism-context" id="id13">Essential commands in a SCHISM context</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="using-linux-from-windows">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Using Linux from Windows</a><a class="headerlink" href="#using-linux-from-windows" title="Permalink to this heading">¶</a></h2>
<p>You will need tools to:</p>
<ul class="simple">
<li><p>connect to the Linux server that serves as a gateway, sometimes called a <em>server</em> or on clusters or supercomputers often called the</p></li>
</ul>
<p><em>head node</em>.
- for graphical applications with windows like browsers and some text editors, you may need something called “XWindow Emulation”.
- A method to copy files back and forth fast, usually with a secure (ssh) method
- often you will want to set up an efficient text editor (Visual Studio Code) and VisIT both of which
adopt a client-server approach to viewing or working on things in Windows that are located on Linux (the server)</p>
<section id="basic-connection">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Basic connection</a><a class="headerlink" href="#basic-connection" title="Permalink to this heading">¶</a></h3>
<p>The simplest tools is PutTy, which can also handle passwordless login using rsa tokens. MobaXTerm is an all-in-one tool that can also handle this task (??).</p>
</section>
<section id="copying-files">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Copying files</a><a class="headerlink" href="#copying-files" title="Permalink to this heading">¶</a></h3>
<p>Copying between Windows and Linux is best done using WinSCP, which piggybacks on Putty. Two side benefits
of WinSCP is that you can use your windows-side text editor on Linux-side files just by clicking,
though this is only going to work well if the file is a managable size. The copies are faster than
other tools and the filter options are very efficient at narrowing down what you are looking at in a directory with hundreds of fi. Two particularly convenient filters are these:</p>
<ul class="simple">
<li><p>sta*;flow*;flux*   # For viewing station outout files and output requests</p></li>
<li><p><em>.gr3;</em>.ic;*.in;*.ll;*.prop;*.nml;*.2d;*.3d;*.clinic;*.tropic;readme*;make_links* | nlayer*.gr3;split_quad.prop</p></li>
</ul>
</section>
<section id="xwindow-emulation">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">XWindow Emulation</a><a class="headerlink" href="#xwindow-emulation" title="Permalink to this heading">¶</a></h3>
<p>You can do this with MobaXTerm, Xming, vcxsrv. These tools provide an engine to emulate graphics.
These are free products. There may be commercial alternatives such as Hummingbird Exceed. XWindows
can be slow with some remote servers or connections, and that may not be something your emulation software can speed up.
For text editing this is the reason a lot of us use VS Code, which uses a client-server approach where
the graphics are actually done locally on windows.</p>
</section>
<section id="all-in-one-mobaxterm">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">All-in-one: MobaXTerm</a><a class="headerlink" href="#all-in-one-mobaxterm" title="Permalink to this heading">¶</a></h3>
<p>MobaXTerm provides an all-in-one approach to the above tasks, but note that it is markedly inferior
at some of them. In particular, it is orders of magnitude slower copying files because it uses a slower protocol and it
lacks good filtering so you have to wait for it to scan directories with thousands of files. As with
WinSCP, it can open a file for editing using local Windows editors, but since the copying is slower the
restrictions will be a bit more severe. Anyhow, it is an interesting option and does basic terminal
work and connections well.</p>
</section>
</section>
<section id="copying-a-run-safely">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Copying a Run Safely</a><a class="headerlink" href="#copying-a-run-safely" title="Permalink to this heading">¶</a></h2>
<p>Do NOT use the linux copy command ‘cp’ to copy a run. A considerable amount of information, particularly symbolic links, will be lost. Instead use rsync:</p>
<ul class="simple">
<li><p>Basic command: <a href="#id1"><span class="problematic" id="id2">`</span></a>rsync -avz /path/to/original_sim/ /path_to_dest/</p>
<ul>
<li><p>The trailing slash on original_sim/ is important. There are many explanations online: search ‘rsync trailing slash’.</p></li>
<li><p>Symbolic links will be preserved.</p></li>
<li><p>If you want to move rather than copy, use –remove-source-files</p></li>
<li><p>Usually, you will want to void copying heavy outputs with <cite>–exclude</cite> option. You can stack them. Examples are:</p>
<ul>
<li><p><cite>–exclude=’outputs*’</cite> omits any directory starting with outputs, in which case you will have to create a new one.</p></li>
<li><p><cite>–exclude=’outputs.tropic*’</cite> omits an extra alternative directory, which you may have created and moved to a new name.</p></li>
<li><p><cite>–exclude=’outputs/*.nc’</cite> leaves staout_1 through staout_9 and flux.out, needed for restarting using ihot=2.</p></li>
<li><p><cite>–exclude=’outputs/nonfatal*’</cite> omits the nonfatal error messsages, which can be big but will be overwritten by new runs.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Change the name of the run in launch.pbs files to something short and informative.</p></li>
<li><p>Change the contact email in launch.pbs.</p></li>
<li><p>At this point if the prior simulation was runable the new one should be.</p></li>
</ul>
<section id="special-case-remote-computer-using-rsa-keys">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Special Case: Remote Computer Using RSA Keys</a><a class="headerlink" href="#special-case-remote-computer-using-rsa-keys" title="Permalink to this heading">¶</a></h3>
<p>We run into this case a lot when copying data from, say, an Azure virtual cluster
in a situation where password authentication is not used.</p>
<p><cite>rsync -e ‘ssh -i ~/.ssh/id_rsa_name’ -avz myname&#64;10.7.240.8:/shared/home/myname/simulations/sim_name/ local_sim_name/ –exclude=’outputs.tropic*’ –exclude=’outputs/*.nc’</cite></p>
</section>
</section>
<section id="symbolic-links">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Symbolic links</a><a class="headerlink" href="#symbolic-links" title="Permalink to this heading">¶</a></h2>
</section>
<section id="archives-and-tarballs">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Archives and Tarballs</a><a class="headerlink" href="#archives-and-tarballs" title="Permalink to this heading">¶</a></h2>
</section>
<section id="essential-commands-in-a-schism-context">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Essential commands in a SCHISM context</a><a class="headerlink" href="#essential-commands-in-a-schism-context" title="Permalink to this heading">¶</a></h2>
<p>Countless Linux introductions are available online, including some excellent <a class="reference external" href="https://files.fosswire.com/2007/08/fwunixref.pdf">cheat sheets like this</a>. Once you know the commands or vocabulary, it is easy to get more information. You will need <cite>cd</cite>, <cite>ls</cite></p>
<dl class="simple">
<dt>cd some_dir</dt><dd><p>Go to the named directory, which may be relative or absolute. Consider pushd some_dir instead if you want to go somewhere temporarily such as to recompile, and then return (with popd)</p>
</dd>
<dt>df -h</dt><dd><p>List total disk use and availability (ie, is there room for a run?)</p>
</dd>
<dt>du -h | sort -n -s</dt><dd><p>List disk usage in human readable form starting at the point where launched  and “pipe” the output to the sort command which lists the results from large to small (ie, how much room have I used here)</p>
</dd>
<dt>find . -name ‘hotstart_000???_*.nc’</dt><dd><p>Find files that match the pattern, with ? matching a single character. Numerous options to take action like deleting.</p>
</dd>
<dt>grep</dt><dd><p>Finds a word or phrase in the contents of files or a string. For instance, <cite>grep nday param*.nml</cite> will give you all the lines with nday in it in all the files matching the wildcard param*.nml (check the end day; use <a href="#id14"><span class="problematic" id="id15">start_</span></a> to get the start year, month, day).</p>
</dd>
<dt>ls -al</dt><dd><p>This variant of the  file listing command <cite>ls</cite> shows dates as welll as symbolic link targets relationships</p>
</dd>
<dt>pwd</dt><dd><p>Name of the current directory</p>
</dd>
<dt>scp</dt><dd><p>Another fast, secure copying tool based on ssh.</p>
</dd>
<dt>tail -n 15</dt><dd><p>Look at the last 15 lines of a file, default 10. Add -f to keep updating, for instance do this with outputs/mirror.out to check if run is chugging along.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="calibration.html" title="Calibration and References"
             >next</a> |</li>
        <li class="right" >
          <a href="learning.html" title="Resources and Manuals for Bay-Delta SCHISM"
             >previous</a> |</li>
        <li><a href="https://water.ca.gov/Library/Modeling-and-Analysis/Bay-Delta-Region-models-and-tools"> Delta Modeling Section</a>|&nbsp;</li>
        <li><a href="https://github.com/CADWRDeltaModeling">GitHub</a>|&nbsp;</li>
        <li><a href="search.html">Search</a>|&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="learning.html" >Resources and Manuals for Bay-Delta SCHISM</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Linux Hints for SCHISM</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014,2020 California Department of Water Resources.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>