<!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intro to Clusters and High Performance Computing &mdash; Bay-Delta SCHISM</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=8686dbcc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=ca842793"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Prepare Ocean Boundary (elev2D.th.nc)" href="ocean.html" />
    <link rel="prev" title="Grid, Spatial Data and Preprocessor" href="preprocess.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo6.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Bay-Delta SCHISM Project</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getmodel.html">Installation And Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#schism-code-or-binaries">SCHISM Code or Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#downloading">Downloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#compile-settings">Compile Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#git">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#bay-delta-package">Bay-Delta Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#required-python-packages">Required Python Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#configuration-system">Configuration System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#id1">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#configuration-file-locations-and-priorities">Configuration File Locations and Priorities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#example-configuration-file">Example Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#bathymetry">Bathymetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#complete-sample-inputs">Complete Sample Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#visit-schism-plug-in">VisIt SCHISM Plug-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#links-to-tools">Links to tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../learning.html">Learning Resources for Bay-Delta SCHISM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#general-resources-and-tools">General Resources and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bay_delta_tutorials.html">Bay-Delta SCHSIM Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux.html">Linux Hints for SCHISM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#using-linux-from-windows">Using Linux from Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#copying-a-run-safely">Copying a Run Safely</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#symbolic-links">Symbolic links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#archives-and-tarballs">Archives and Tarballs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#essential-commands-in-a-schism-context">Essential commands in a SCHISM context</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#manuals">Manuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#vims-and-other-external-resources">VIMS and Other External Resources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">Bay-Delta SCHISM User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#bay-delta-schism-setup">Bay-Delta SCHISM Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="processed_run.html">Running a Preprepared Setup</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../user_guide.html#bay-delta-schism-essentials">Bay-Delta SCHISM Essentials</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../user_guide.html#overview">Overview</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="overview.html">Overview of a Bay-Delta SCHISM Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="vignette.html">Vignette: Hindcast Bay Delta SCHISM at Delta Modeling Section with Preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="files_and_directories.html">Required Files, Directory Structure and Recommended Study Practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html">Grid, Spatial Data and Preprocessor</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Intro to Clusters and High Performance Computing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#boundaries-input-files">Boundaries &amp; Input Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ocean.html">Prepare Ocean Boundary (elev2D.th.nc)</a></li>
<li class="toctree-l4"><a class="reference internal" href="flow_boundary.html">Inflow/Outflow Boundaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="atmospheric.html">Atmospheric setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="barotropic.html">Ocean Boundary Stabilization: Barotropic Warmup</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html">Key Run Parameters and Gotchas</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html">Run Initialization and Restart (Hotstart)</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html">Nudging Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html">Vegetation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#inspection-of-model-setup">Inspection of Model Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="checklists.html">Checklists</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_tests.html">Test Suite for Prechecking Runs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#output-files">Output Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="output.html">Output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#advanced-tasks-and-concepts">Advanced Tasks and Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="problems.html">Common Problems and Diagnosis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="problems.html#where-does-schism-write-error-messages">Where does SCHISM write error messages?</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#my-run-says-segfault">My run says “segfault”</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#the-runs-seems-very-slow-compared-to-normal">The runs seems very slow compared to normal</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#dry-boundary">Dry boundary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="age.html">Simulating water age</a><ul>
<li class="toctree-l4"><a class="reference internal" href="age.html#compile-with-age">Compile with age</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#parameters-in-param-nml">Parameters in param.nml</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#additional-ic-files">Additional *.ic files</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#hotstart-considerations">Hotstart considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#typical-output-processing">Typical output processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sea_level_rise.html">Sea Level Rise</a></li>
<li class="toctree-l3"><a class="reference internal" href="sources.html">Sources, Sinks, Delta Channel Depletions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sources.html#identifying-source-locations-and-names-in-preprocessor">Identifying source locations and names in preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#delta-and-suisun-channel-depletions">Delta and Suisun channel depletions</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#making-sure-you-includ-the-th-files-for-sources-sinks">Making sure you includ the th files for sources/sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#tracer-concentrations">Tracer concentrations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="structures.html">Hydraulic Structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="structures.html#where-is-the-documentation">Where is the documentation?</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#setting-up-the-mesh-to-make-structures-easy">Setting up the mesh to make structures easy</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#preventing-dry-boundary-messages">Preventing dry boundary messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#important-bay-delta-examples">Important Bay-Delta examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mesh.html">Gridding the Horizontal Mesh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#meshing">Meshing</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#vertical-mesh-setup">Vertical mesh setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#checklist-for-after-you-change-the-mesh">Checklist for after you change the mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#performance-tuning">Performance Tuning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utilities and Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#gis-conversion">GIS Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#hotstart-inventory-convert-iteration-numbers-to-dates">Hotstart Inventory: Convert iteration numbers to dates</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#model-time-and-multi-clip">model_time and multi_clip</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#linux">Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#how-it-works">How it works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#local-html-pages">Local html pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#github-pages">GitHub Pages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#further-documentation-concepts">Further Documentation Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_sphinx.html">Sphinx Documentation Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#headings-order">Headings order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#baydeltaschism-specifics">BayDeltaSCHISM Specifics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_mermaid.html">Mermaid Chart Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#baydeltaschism-standards">BayDeltaSCHISM Standards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#vs-code-plugin">VS Code plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#cool-stuff">Cool stuff</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_click.html">Click Documentation Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_examples.html">Sphinx examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#math">Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#figures">Figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#diagrams">Diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#embedding-videos">Embedding Videos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../calibration.html">Calibration Report and References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../calibration.html#calibration">Calibration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html#support">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bay-Delta SCHISM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="intro-to-clusters-and-high-performance-computing">
<h1>Intro to Clusters and High Performance Computing<a class="headerlink" href="#intro-to-clusters-and-high-performance-computing" title="Link to this heading"></a></h1>
<p>This section provides a high-level overview of high performance computing (HPC) and clusters.
Getting started with Linux and HPC clusters can be a hurdle for new users, although
our experience is that it becomes routine after a few times.
We can’t provide comprehensive training on all aspects of cluster use in this section,
but we can orient you so that you know some of the lingo and can intelligently
progress with HPC resources.</p>
<section id="anatomy-of-a-cluster">
<h2>Anatomy of a Cluster<a class="headerlink" href="#anatomy-of-a-cluster" title="Link to this heading"></a></h2>
<p>A typical HPC cluster (<a class="reference internal" href="#fig-cluster-components"><span class="std std-ref">Figure: Cluster Components</span></a>) consists of several interconnected components. Users usually connect to
the cluster using a Linux front-end tool such as <em>MobaXterm</em>, <em>PuTTY</em>, or similar, logging into
a special machine called the <em>head node</em>.</p>
<p>The head node is not intended for computation—at a major facility, this node is a shared
resource, and running jobs on it is discouraged. Instead, the head node connects you to:</p>
<ul class="simple">
<li><p>Shared scratch storage</p></li>
<li><p>A job queueing system (e.g., <strong>Slurm</strong>, <strong>Torque</strong>, <strong>PBS</strong>)</p></li>
</ul>
<p>You will upload your input data to a designated scratch location. This is typically <strong>not</strong> your
home directory on the head node, so be sure to check with your system administrator or facility
documentation.</p>
</section>
<section id="figure-cluster-components">
<span id="fig-cluster-components"></span><h2>Figure: Cluster Components<a class="headerlink" href="#figure-cluster-components" title="Link to this heading"></a></h2>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/linux_cluster.png"><img alt="Diagram of a cluster showing head node, compute nodes, and storage" src="../_images/linux_cluster.png" style="width: 60%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text"><strong>Figure</strong>: Schematic layout of a typical HPC cluster showing login (head) node,
compute nodes, shared storage, and interconnects.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="compilation">
<h2>Compilation<a class="headerlink" href="#compilation" title="Link to this heading"></a></h2>
<p>As with most Linux programs, when migrating to a new cluser one needs to compile the code for the system,
taking care of dependencies such as cmake, compilers, MPI and NetCDF. These are common components and your
vendor should be able to help (we can help interpret a good faith effort). Some users are used to this compilation
process, which is also required if you want to modify the model.</p>
<p>An alternative is to use <a class="reference internal" href="#sec-azbatch"><span class="std std-ref">Intro to Batch Cloud Cluster</span></a>, which may provide enough control to allow you to use versions we have prepackaged.</p>
</section>
<section id="job-submission">
<h2>Job Submission<a class="headerlink" href="#job-submission" title="Link to this heading"></a></h2>
<p>The job queueing system manages run submissions and dispatches them according to a scheduling
policy, often based on priority, available resources, and fair use policies. While queue systems
differ slightly, they all support core operations such as:</p>
<ul class="simple">
<li><p>Submitting a job</p></li>
<li><p>Listing jobs in the queue</p></li>
<li><p>Canceling a job</p></li>
</ul>
<p>Once your inputs are organized, you can submit a job in Slurm using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sbatch<span class="w"> </span>launch.slurm
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> is the Slurm submission command, and <code class="docutils literal notranslate"><span class="pre">launch.slurm</span></code> is your job launch file.
This file typically specifies:</p>
<ul class="simple">
<li><p>Your user information</p></li>
<li><p>The job name</p></li>
<li><p>Number of nodes and cores to request</p></li>
<li><p>The command to run your application</p></li>
</ul>
<p>Job submission syntax and behavior (e.g., handling of environment variables, working directories,
and node allocation) may differ slightly across systems. We are happy to provide example files
upon request.</p>
<p>The job file usually ends by calling a shell script (e.g., <code class="docutils literal notranslate"><span class="pre">run_schism.sh</span></code>), which in turn
invokes the <strong>SCHISM</strong> model. The script may load necessary modules or libraries depending on
your build of SCHISM (e.g., whether it includes age tracking, sediment transport, etc.).</p>
</section>
<section id="compute-nodes-and-message-passing">
<h2>Compute Nodes and Message Passing<a class="headerlink" href="#compute-nodes-and-message-passing" title="Link to this heading"></a></h2>
<p>The actual computations are carried out on <em>compute nodes</em>. A <strong>node</strong> is a unit of compute
resources that includes:</p>
<ul class="simple">
<li><p>RAM</p></li>
<li><p>Disk space</p></li>
<li><p>One or more <strong>processors</strong>, which in turn include multiple <strong>cores</strong></p></li>
</ul>
<p>In <strong>SCHISM</strong>, the spatial domain (e.g., the San Francisco Bay-Delta) is split into subdomains
for computation across multiple cores. These nodes are connected via high-speed interconnects
such as <strong>InfiniBand</strong>.</p>
<p>Because SCHISM uses <em>domain decomposition</em>, the model must exchange data between cores at
each time step. This communication occurs along shared subdomain boundaries and is handled via
<strong>MPI</strong> (Message Passing Interface)—a standardized and efficient protocol for data exchange in
parallel programs.</p>
<p>MPI performance is heavily influenced by both hardware quality (e.g., latency and bandwidth of
the interconnect) and the quality of the MPI library implementation.</p>
<p>Important Notes:</p>
<ul class="simple">
<li><p>There is no “main core” or centralized controller in a well-designed MPI program.</p></li>
<li><p>The head node does <strong>not</strong> participate in computation or MPI communication—it only handles
job submission and user interaction.</p></li>
</ul>
</section>
<section id="input-output-and-scribes">
<h2>Input/Output and Scribes<a class="headerlink" href="#input-output-and-scribes" title="Link to this heading"></a></h2>
<p>SCHISM uses a small number of dedicated <em>scribe</em> cores for writing output to disk. Typically:</p>
<ul class="simple">
<li><p>One scribe handles all 2D NetCDF output files.</p></li>
<li><p>One additional scribe is assigned for every 3D NetCDF output file.</p></li>
</ul>
<p>These scribes are necessary to avoid contention and ensure efficient parallel I/O.</p>
</section>
<section id="example-slurm-launch-file">
<h2>Example Slurm Launch File<a class="headerlink" href="#example-slurm-launch-file" title="Link to this heading"></a></h2>
<p>Here is a real-world example of a Slurm job submission file for running SCHISM:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=msstps       # Job name</span>
<span class="c1">#SBATCH --partition=work        # Partition name to submit the job</span>
<span class="c1">#SBATCH --mail-type=END,FAIL    # Mail events (NONE, BEGIN, END, FAIL, ALL)</span>
<span class="c1">#SBATCH --mail-user=eli@water.ca.gov  # Where to send mail</span>
<span class="c1">#SBATCH --ntasks=192            # Number of MPI ranks (or cores)</span>
<span class="c1">#SBATCH --nodes=6               # Number of nodes</span>
<span class="c1">#SBATCH --ntasks-per-node=32    # Tasks per node</span>
<span class="c1">#SBATCH --output=slurm_log_%j.log  # Standard output and error log</span>

module<span class="w"> </span>load<span class="w"> </span>intel/2024.0
module<span class="w"> </span>load<span class="w"> </span>hmpt/2.29

mpirun<span class="w"> </span>bash<span class="w"> </span>schism_hmpt.sh
</pre></div>
</div>
</section>
<section id="example-shell-script-to-run-schism">
<h2>Example Shell Script to Run SCHISM<a class="headerlink" href="#example-shell-script-to-run-schism" title="Link to this heading"></a></h2>
<p>The shell script below is used to configure the environment and invoke the SCHISM binary:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
module<span class="w"> </span>purge
module<span class="w"> </span>load<span class="w"> </span>intel/2024.0<span class="w"> </span>hmpt/2.29<span class="w"> </span>hdf5/1.14.3<span class="w"> </span>netcdf-c/4.9.2<span class="w"> </span>netcdf-fortran/4.6.1<span class="w"> </span>schism/5.11.1

<span class="nb">ulimit</span><span class="w"> </span>-s<span class="w"> </span>unlimited
<span class="nv">NSCRIBES</span><span class="o">=</span><span class="m">7</span><span class="w">   </span><span class="c1"># This is the number of scribes for the example</span>
<span class="nv">SCHISM_BIN</span><span class="o">=</span>pschism_PREC_EVAP_GOTM_TVD-VL
<span class="nv">$SCHISM_BIN</span><span class="w"> </span><span class="nv">$NSCRIBES</span>
</pre></div>
</div>
</section>
<section id="intro-to-batch-cloud-cluster">
<span id="sec-azbatch"></span><h2>Intro to Batch Cloud Cluster<a class="headerlink" href="#intro-to-batch-cloud-cluster" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="#fig-cluster-components"><span class="std std-ref">Figure: Cluster Components</span></a> shows how Azure Batch processing differs. In this mode of processing,
inputs are uploaded to a long-term Binary Large OBject (BLOB) storage location.</p>
<p>Batch jobs are then launched through Azure Batch, and the assigned computional pool pulls down the inputs,
acts as a cluster to run the model, and pushes back outputs as they are generated.
This method tends to be very economical and it allows prepackaging of versions. The downside is that it
is not very agile and feels a it detached. For instance, we tend to develop our runs on in-house clusters and then once the based
case is settled we run the larger set of scenarios on Azure Batch.</p>
</section>
<section id="figure-azure-batch-cluster-components">
<span id="fig-azure-batch-components"></span><h2>Figure: Azure Batch Cluster Components<a class="headerlink" href="#figure-azure-batch-cluster-components" title="Link to this heading"></a></h2>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/azure_batch.png"><img alt="Diagram of a cluster showing head node, compute nodes, and storage" src="../_images/azure_batch.png" style="width: 50%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text"><strong>Figure</strong>: Schematic layout of a typical HPC cluster showing login (head) node,
compute nodes, shared storage, and interconnects.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="preprocess.html" class="btn btn-neutral float-left" title="Grid, Spatial Data and Preprocessor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ocean.html" class="btn btn-neutral float-right" title="Prepare Ocean Boundary (elev2D.th.nc)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014,2020 California Department of Water Resources.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: white;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #86989B; /* existing theme was AFC1C4 and 86989B and CA7900 and white */
      
    }
  </style>


</body>
</html>