<!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inflow/Outflow Boundaries &mdash; Bay-Delta SCHISM</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=8686dbcc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=ca842793"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Atmospheric setup" href="atmospheric.html" />
    <link rel="prev" title="Prepare Ocean Boundary (elev2D.th.nc)" href="ocean.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo6.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Bay-Delta SCHISM Project</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getmodel.html">Installation And Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#schism-code-or-binaries">SCHISM Code or Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#downloading">Downloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#compile-settings">Compile Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#git">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#bay-delta-package">Bay-Delta Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#required-python-packages">Required Python Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#configuration-system">Configuration System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#id1">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#configuration-file-locations-and-priorities">Configuration File Locations and Priorities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#example-configuration-file">Example Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#bathymetry">Bathymetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#complete-sample-inputs">Complete Sample Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#visit-schism-plug-in">VisIt SCHISM Plug-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#links-to-tools">Links to tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../learning.html">Learning Resources for Bay-Delta SCHISM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#general-resources-and-tools">General Resources and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bay_delta_tutorials.html">Bay-Delta SCHSIM Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux.html">Linux Hints for SCHISM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#using-linux-from-windows">Using Linux from Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#copying-a-run-safely">Copying a Run Safely</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#symbolic-links">Symbolic links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#archives-and-tarballs">Archives and Tarballs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#essential-commands-in-a-schism-context">Essential commands in a SCHISM context</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#manuals">Manuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#vims-and-other-external-resources">VIMS and Other External Resources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">Bay-Delta SCHISM User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#bay-delta-schism-setup">Bay-Delta SCHISM Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="processed_run.html">Running a Preprepared Setup</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../user_guide.html#bay-delta-schism-essentials">Bay-Delta SCHISM Essentials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="overview.html">Overview of a Bay-Delta SCHISM Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="vignette.html">Vignette: Hindcast Bay Delta SCHISM at Delta Modeling Section with Preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="files_and_directories.html">Required Files, Directory Structure and Recommended Study Practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html">Grid, Spatial Data and Preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html">Intro to Clusters and High Performance Computing</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../user_guide.html#boundaries-input-files">Boundaries &amp; Input Files</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ocean.html">Prepare Ocean Boundary (elev2D.th.nc)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Inflow/Outflow Boundaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="atmospheric.html">Atmospheric setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="barotropic.html">Ocean Boundary Stabilization: Barotropic Warmup</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html">Key Run Parameters and Gotchas</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html">Run Initialization and Restart (Hotstart)</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html">Nudging Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html">Vegetation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#inspection-of-model-setup">Inspection of Model Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="checklists.html">Checklists</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_tests.html">Test Suite for Prechecking Runs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide.html#output-files">Output Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="output.html">Output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#advanced-tasks-and-concepts">Advanced Tasks and Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="problems.html">Common Problems and Diagnosis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="problems.html#where-does-schism-write-error-messages">Where does SCHISM write error messages?</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#my-run-says-segfault">My run says “segfault”</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#the-runs-seems-very-slow-compared-to-normal">The runs seems very slow compared to normal</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#dry-boundary">Dry boundary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="age.html">Simulating water age</a><ul>
<li class="toctree-l4"><a class="reference internal" href="age.html#compile-with-age">Compile with age</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#parameters-in-param-nml">Parameters in param.nml</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#additional-ic-files">Additional *.ic files</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#hotstart-considerations">Hotstart considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#typical-output-processing">Typical output processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sea_level_rise.html">Sea Level Rise</a></li>
<li class="toctree-l3"><a class="reference internal" href="sources.html">Sources, Sinks, Delta Channel Depletions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sources.html#identifying-source-locations-and-names-in-preprocessor">Identifying source locations and names in preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#delta-and-suisun-channel-depletions">Delta and Suisun channel depletions</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#making-sure-you-includ-the-th-files-for-sources-sinks">Making sure you includ the th files for sources/sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#tracer-concentrations">Tracer concentrations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="structures.html">Hydraulic Structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="structures.html#where-is-the-documentation">Where is the documentation?</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#setting-up-the-mesh-to-make-structures-easy">Setting up the mesh to make structures easy</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#preventing-dry-boundary-messages">Preventing dry boundary messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#important-bay-delta-examples">Important Bay-Delta examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mesh.html">Gridding the Horizontal Mesh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#meshing">Meshing</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#vertical-mesh-setup">Vertical mesh setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#checklist-for-after-you-change-the-mesh">Checklist for after you change the mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#performance-tuning">Performance Tuning</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utilities and Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#gis-conversion">GIS Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#hotstart-inventory-convert-iteration-numbers-to-dates">Hotstart Inventory: Convert iteration numbers to dates</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#model-time-and-multi-clip">model_time and multi_clip</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#linux">Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#how-it-works">How it works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#local-html-pages">Local html pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#github-pages">GitHub Pages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#further-documentation-concepts">Further Documentation Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_sphinx.html">Sphinx Documentation Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#headings-order">Headings order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#baydeltaschism-specifics">BayDeltaSCHISM Specifics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_mermaid.html">Mermaid Chart Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#baydeltaschism-standards">BayDeltaSCHISM Standards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#vs-code-plugin">VS Code plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#cool-stuff">Cool stuff</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_click.html">Click Documentation Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_examples.html">Sphinx examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#math">Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#figures">Figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#diagrams">Diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_examples.html#embedding-videos">Embedding Videos</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../calibration.html">Calibration Report and References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../calibration.html#calibration">Calibration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html#support">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bay-Delta SCHISM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inflow-outflow-boundaries">
<h1>Inflow/Outflow Boundaries<a class="headerlink" href="#inflow-outflow-boundaries" title="Link to this heading"></a></h1>
<p>Inflow/outflow boundaries locations specified in <cite>hgrid.gr3</cite>, usually with the preprocessor identifying the start
and end of the string of nodes. The fact that a boundary is a flow or tracer
boundaries is specified in <cite>bctides.in</cite>. The actual data are provided in <cite>flux.th</cite> for flow
and <cite>SAL_1.th</cite>, <cite>TEM_1.th</cite> for other tracers. For info on the .th file format,
you can refer to the <a class="reference external" href="https://schism-dev.github.io/schism/master/input-output/optional-inputs.html#th-ascii">SCHISM manual</a>
on the topic.</p>
<section id="where-are-the-data">
<h2>Where are the data?<a class="headerlink" href="#where-are-the-data" title="Link to this heading"></a></h2>
<p>In BayDeltaSCHISM/data we provide flux.th, salinity.th (maps to SAL_1.th) and temperature.th (maps to TEM_1.th) that go back to roughly
2008. Before that, operations were different and some of our better data sources were unavailable.</p>
</section>
<section id="clipping-to-run-dates-and-conversion-to-elapsed-time">
<h2>Clipping to run dates and conversion to elapsed time<a class="headerlink" href="#clipping-to-run-dates-and-conversion-to-elapsed-time" title="Link to this heading"></a></h2>
<p>The .th format uses elapsed seconds from run start for time and has no headers. Our data are provided in what we call dated format. We mix it down before
the run.</p>
</section>
<section id="what-if-i-have-to-add-or-move-a-boundary">
<h2>What if I have to add or move a boundary?<a class="headerlink" href="#what-if-i-have-to-add-or-move-a-boundary" title="Link to this heading"></a></h2>
<p>Moving the grid relative to the boundary or a boundary relative to the grid has consequences in some far flung places.
You’ll want to cover our <a class="reference internal" href="mesh.html#change-mesh"><span class="std std-ref">checklist</span></a> of consequences and consider which apply to your case.</p>
<p>Please also note that our boundary condition file is constructed, in order, from our most common boundaries. If you add a boundary you may have to
inject a column into the flux.th file.</p>
</section>
<section id="adding-data-from-other-sources-e-g-forecasts-other-models">
<h2>Adding Data From Other Sources (e.g. Forecasts, other models)<a class="headerlink" href="#adding-data-from-other-sources-e-g-forecasts-other-models" title="Link to this heading"></a></h2>
<p>The <code class="file docutils literal notranslate"><span class="pre">port_boundary.py</span></code> script in BayDeltaSCHISM/bdschism/bdschism/  contains utilities
to convert or graft outputs from various data formats (other models or forecasts) onto
files in SCHISM time history (.th) formats.</p>
<dl class="py function">
<dt class="sig sig-object py" id="port_boundary.read_csv">
<span class="sig-prename descclassname"><span class="pre">port_boundary.</span></span><span class="sig-name descname"><span class="pre">read_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/port_boundary.html#read_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#port_boundary.read_csv" title="Link to this definition"></a></dt>
<dd><p>Reads in a csv file of monthly boundary conditions and interpolates
Outputs an interpolated DataFrame of that variable</p>
<p><strong>File Descriptions</strong></p>
<blockquote>
<div><p><code class="file docutils literal notranslate"><span class="pre">port_boundary.py</span></code>: main script</p>
<p><code class="file docutils literal notranslate"><span class="pre">port_boundary_map.csv</span></code>: configuration file</p>
</div></blockquote>
<p><strong>Configuring the mapping file</strong></p>
<p>The mapping file <code class="file docutils literal notranslate"><span class="pre">port_boundary_map.csv</span></code> is the main configuration
file in which the SCHISM variables are mapped to their respective substitution variables and sources.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>schism_boundary</strong>: the SCHISM boundary variable</p></li>
<li><p><strong>boundary_kind</strong>: type of boundary (flow, ec, temp)</p></li>
<li><p><strong>source_kind</strong>: the type of file to convert from (SCHISM, CSV, DSS, CONSTANT)</p></li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If SCHISM is used as the source, values from the designated SCHISM .th file are
copied over and used directly.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for CSV <em>source_kind</em>: pd.read_csv() is used to parse the csv and, as coded, parses
monthly data. The format of a csv source_kind is shown in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>date</p></th>
<th class="head"><p>RSAC155</p></th>
<th class="head"><p>RSAN112</p></th>
<th class="head"><p>var_n</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1/1/2014</p></td>
<td><p>5609</p></td>
<td><p>1233</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-odd"><td><p>1/2/2014</p></td>
<td><p>4771</p></td>
<td><p>1162</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for DSS <em>source_kind</em>, CalSim or DSM2 standard DSS files may be used.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for CONSTANT <em>source kind</em>, input a value in the ‘var’ column. This may be used when an input boundary is
generlly constant (.e.g, Sacramento River boundary EC).</p>
</div>
</div></blockquote>
<ol class="arabic" start="4">
<li><p><strong>derived</strong>: whether to use the variable directly, or calculate based on other variables. For example SCHISM variable ‘east’ is sum of DSM2 variables RCSM075 and RMKL070.</p></li>
<li><p><strong>source_file</strong>: path of the source_file (relative path)</p></li>
<li><p><strong>var</strong>: variable name within the source file.</p></li>
<li><p><strong>sign</strong>: multiplied by timeseries to change direction of flow.</p></li>
<li><p><strong>convert</strong>: apply unit conversions (CFS_CMS, EC_PSU):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">convert</span> <span class="o">==</span> <span class="s1">&#39;CFS_CMS&#39;</span><span class="p">:</span>
    <span class="n">dfi</span> <span class="o">=</span> <span class="n">dfi</span> <span class="o">*</span> <span class="n">CFS2CMS</span> <span class="o">*</span> <span class="n">sign</span>
<span class="k">elif</span> <span class="n">convert</span> <span class="o">==</span> <span class="s1">&#39;EC_PSU&#39;</span><span class="p">:</span>
    <span class="n">dfi</span> <span class="o">=</span> <span class="n">ec_psu_25c</span><span class="p">(</span><span class="n">dfi</span><span class="p">)</span> <span class="o">*</span> <span class="n">sign</span>
</pre></div>
</div>
</li>
<li><p><strong>rhistinterp_p</strong>: this script uses <a class="reference external" href="https://github.com/CADWRDeltaModeling/vtools3/blob/b7cfa54f45e8efa803cb3ebfb4f580d1e9719957/vtools/functions/interpolate.py#L15">rhistinterp</a> to interpolate and smooth timeseries of coarser timesteps.
This field sets the parameter p</p></li>
<li><p><strong>formula</strong>: the formula for the derived timeseries Used if derived = TRUE.</p></li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Python’s eval() function is used to parse the code entered in the cell.
Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">RCSM075</span><span class="o">+</span><span class="n">csv</span><span class="o">.</span><span class="n">RMKL070</span><span class="p">)</span>
</pre></div>
</div>
<p>The above entry would sum up RCSM075 and RMKL070 from the CSV source</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">flux</span><span class="o">.</span><span class="n">american</span><span class="o">/</span><span class="p">(</span><span class="n">flux</span><span class="o">.</span><span class="n">sac</span><span class="o">+</span><span class="n">flux</span><span class="o">.</span><span class="n">american</span><span class="p">))</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">RSAC155</span><span class="p">)</span>
</pre></div>
</div>
<p>The above entry would multiply the RSAC155 from the CSV source by the ratio of the (Amer River/Amer+Sac River).
This is used to disaggregate the total Sacramento R. flow above the confluence (i.e., from DSM2) into its American
River component, based on an existing SCHISM flux.th input.</p>
<p><strong>The dataframes are named:</strong></p>
<blockquote>
<div><p><em>flux</em>: DataFrame containing the historical SCHISM flux.th file</p>
<p><em>salt</em>: DataFrame containing the historical SCHISM salt.th file</p>
<p><em>temp</em>: DataFrame containing the historical SCHISM temp.th file</p>
<p><em>csv</em>: DataFrame containing the values from the CSV source</p>
<p><em>dss</em>: DataFrame containing the values from the DSS source</p>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the SCHISM time history files used are the ones in this repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">schism_flux_file</span> <span class="o">=</span> <span class="s1">&#39;../data/time_history/flux.th&#39;</span>
<span class="n">schism_salt_file</span> <span class="o">=</span> <span class="s1">&#39;../data/time_history/salt.th&#39;</span>
<span class="n">schism_temp_file</span> <span class="o">=</span> <span class="s1">&#39;../data/time_history/temp.th&#39;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</div></blockquote>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ocean.html" class="btn btn-neutral float-left" title="Prepare Ocean Boundary (elev2D.th.nc)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="atmospheric.html" class="btn btn-neutral float-right" title="Atmospheric setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014,2020 California Department of Water Resources.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: white;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #86989B; /* existing theme was AFC1C4 and 86989B and CA7900 and white */
      
    }
  </style>


</body>
</html>