<!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vignette: Hindcast Bay Delta SCHISM at Delta Modeling Section with Preprocessor &mdash; Bay-Delta SCHISM</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=8686dbcc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=ca842793"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Required Files, Directory Structure and Recommended Study Practices" href="files_and_directories.html" />
    <link rel="prev" title="Overview of a Bay-Delta SCHISM Run" href="overview.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo6.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Bay-Delta SCHISM Project</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getmodel.html">Installation And Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#schism-software-code-binaries">SCHISM Software Code/Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#downloading">Downloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#compile-settings">Compile Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#bay-delta-schism-python-package">Bay-Delta SCHISM Python Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#id1">Downloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#contents">Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#bathymetry">Bathymetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#complete-sample-inputs">Complete Sample Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#other-required-python-packages">Other Required Python Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#configuration-system">Configuration System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#id3">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#configuration-file-locations-and-priorities">Configuration File Locations and Priorities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getmodel.html#example-configuration-file">Example Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#visit-schism-plug-in">VisIt SCHISM Plug-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getmodel.html#links-to-tools">Links to tools</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">Bay-Delta SCHISM User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../user_guide.html#essentials-for-running-the-model">Essentials for Running the Model</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="processed_run.html">Running a Preprepared Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview of a Bay-Delta SCHISM Run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="overview.html#grid-and-spatial-data">Grid and Spatial Data</a><ul>
<li class="toctree-l5"><a class="reference internal" href="overview.html#templates">Templates</a></li>
<li class="toctree-l5"><a class="reference internal" href="overview.html#preprocessor">Preprocessor</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="overview.html#time-dependent-data">Time-dependent data</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview.html#files-that-change-with-both-mesh-and-dates">Files that Change with Both Mesh and Dates</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview.html#driver-files-param-tropic-nml-param-clinic-nml">Driver Files (param.tropic.nml, param.clinic.nml)</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview.html#other-nomenclature-and-concepts">Other Nomenclature and Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview.html#organizing-the-launch-directory">Organizing the Launch Directory</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Vignette: Hindcast Bay Delta SCHISM at Delta Modeling Section with Preprocessor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#windows">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#barotropic">Barotropic</a></li>
<li class="toctree-l5"><a class="reference internal" href="#baroclinic">Baroclinic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="files_and_directories.html">Required Files, Directory Structure and Recommended Study Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="files_and_directories.html#required-files-and-structure">Required files and structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="files_and_directories.html#schism-launch-directory-structure">SCHISM launch directory structure</a></li>
<li class="toctree-l5"><a class="reference internal" href="files_and_directories.html#launch-directory">Launch directory</a></li>
<li class="toctree-l5"><a class="reference internal" href="files_and_directories.html#output-directory">Output directory</a></li>
<li class="toctree-l5"><a class="reference internal" href="files_and_directories.html#atmospheric-sflux-directory">Atmospheric (sflux) directory</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="files_and_directories.html#study-layout">Study layout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="preprocess.html">Grid, Spatial Data and Preprocessor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html#do-i-need-it-copy-existing-run-vs-preprocess-from-template">Do I need it? Copy existing run vs preprocess from template?</a></li>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html#running-the-preprocessor">Running the preprocessor</a><ul>
<li class="toctree-l5"><a class="reference internal" href="preprocess.html#applying-the-template">Applying the template</a></li>
<li class="toctree-l5"><a class="reference internal" href="preprocess.html#partial-preprocessing-for-modification">Partial preprocessing for modification</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html#configuring-the-input-yaml">Configuring the input (yaml)</a></li>
<li class="toctree-l4"><a class="reference internal" href="preprocess.html#where-to-required-files-and-directory-structure">Where to? Required files and directory structure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#boundaries-input-files">Boundaries &amp; Input Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ocean.html">Prepare Ocean Boundary (elev2D.th.nc)</a></li>
<li class="toctree-l3"><a class="reference internal" href="flow_boundary.html">Inflow/Outflow Boundaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="flow_boundary.html#where-are-the-data">Where are the data?</a></li>
<li class="toctree-l4"><a class="reference internal" href="flow_boundary.html#clipping-to-run-dates-and-conversion-to-elapsed-time">Clipping to run dates and conversion to elapsed time</a></li>
<li class="toctree-l4"><a class="reference internal" href="flow_boundary.html#what-if-i-have-to-add-or-move-a-boundary">What if I have to add or move a boundary?</a></li>
<li class="toctree-l4"><a class="reference internal" href="flow_boundary.html#adding-data-from-other-sources-e-g-forecasts-other-models">Adding Data From Other Sources (e.g. Forecasts, other models)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="atmospheric.html">Atmospheric setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="atmospheric.html#basic-introduction-and-requirements">Basic introduction and requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="atmospheric.html#where-are-the-data">Where are the data?</a></li>
<li class="toctree-l4"><a class="reference internal" href="atmospheric.html#pointing-to-the-data-with-make-links-full-py">Pointing to the data with make_links_full.py</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="barotropic.html">Ocean Boundary Stabilization: Barotropic Warmup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="barotropic.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="barotropic.html#workflow">Workflow</a><ul>
<li class="toctree-l5"><a class="reference internal" href="barotropic.html#bctides-in">bctides.in</a></li>
<li class="toctree-l5"><a class="reference internal" href="barotropic.html#param-nml">param.nml</a></li>
<li class="toctree-l5"><a class="reference internal" href="barotropic.html#vgrid-in">vgrid.in</a><ul>
<li class="toctree-l6"><a class="reference internal" href="barotropic.html#run-interpolate-variables-to-get-uv3d-th-nc">Run interpolate_variables to get uv3D.th.nc</a></li>
<li class="toctree-l6"><a class="reference internal" href="barotropic.html#move-the-outputs-directory-aside">Move the outputs directory aside</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="param.html">Key Run Parameters and Gotchas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="param.html#runtime-settings">Runtime settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html#hotstart-settings">Hotstart settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html#nudging-settings">Nudging settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html#output-requests">Output requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html#settings-that-have-historically-gone-awry">Settings that have historically gone awry</a></li>
<li class="toctree-l4"><a class="reference internal" href="param.html#what-happens-when-schism-versions-get-advanced">What happens when SCHISM versions get advanced?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hotstart.html">Run Initialization and Restart (Hotstart)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html#when-do-you-need-an-initial-condition-or-hotstart">When do you need an initial condition or hotstart?</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html#what-is-the-difference-between-a-cold-and-hot-start">What is the difference between a cold and hot start?</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html#combining-hotstarts">Combining hotstarts</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html#choosing-a-good-start-time">Choosing a good start time</a></li>
<li class="toctree-l4"><a class="reference internal" href="hotstart.html#creating-a-hotstart-for-hydro-salt-temp-with-schism-hotstart">Creating a Hotstart for Hydro/Salt/Temp with schism_hotstart</a><ul>
<li class="toctree-l5"><a class="reference internal" href="hotstart.html#acquiring-the-data">Acquiring the data</a></li>
<li class="toctree-l5"><a class="reference internal" href="hotstart.html#configuring-the-hotstart-request-yaml">Configuring the Hotstart request (yaml)</a></li>
<li class="toctree-l5"><a class="reference internal" href="hotstart.html#running-the-hotstart-generator">Running the hotstart generator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nudging.html">Nudging Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#introduction-what-is-nudging">Introduction: What is nudging?</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#do-i-need-nudging">Do I need nudging?</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#generating-nudging-files">Generating nudging files</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nudging.html#schimpy.nudging.Nudging"><code class="docutils literal notranslate"><span class="pre">Nudging</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="nudging.html#schimpy.nudging.Nudging.create_nudging"><code class="docutils literal notranslate"><span class="pre">Nudging.create_nudging()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#preparing-for-nudging-with-observed-data">Preparing for nudging with observed data</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#nudging-example">Nudging Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#nudging-suffix-standards-and-procedure">Nudging Suffix Standards and Procedure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nudging.html#schism-conventions">SCHISM Conventions</a></li>
<li class="toctree-l5"><a class="reference internal" href="nudging.html#baydeltaschism-conventions">BayDeltaSCHISM Conventions</a></li>
<li class="toctree-l5"><a class="reference internal" href="nudging.html#using-the-set-nudge-utility">Using the set_nudge Utility</a><ul>
<li class="toctree-l6"><a class="reference internal" href="nudging.html#bds-set-nudge">bds set_nudge</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#sequencing-your-run">Sequencing your run</a></li>
<li class="toctree-l4"><a class="reference internal" href="nudging.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vegetation.html">Vegetation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html#aquatic-vegetation-in-schism">Aquatic Vegetation in SCHISM</a></li>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html#approximations-and-preprocessor">Approximations and preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html#effective-stem-density">Effective Stem Density</a></li>
<li class="toctree-l4"><a class="reference internal" href="vegetation.html#height">Height</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#inspection-of-model-setup">Inspection of Model Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="checklists.html">Checklists</a><ul>
<li class="toctree-l4"><a class="reference internal" href="checklists.html#running-a-processed-setup">Running a Processed Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="checklists.html#simple-hindcast-runs">Simple Hindcast Runs</a><ul>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-choose-run-dates">☐ Choose run dates</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-apply-template-to-existing-mesh">☐ Apply template to existing mesh</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-collect-time-series-inputs">☐ Collect time series inputs</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-hotstart-can-be-concurrent-with-barotropic">☐ Hotstart (can be concurrent with barotropic)</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-nudging-can-be-concurrent-with-barotropic">☐ Nudging (can be concurrent with barotropic)</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-barotropic-warmup">☐ Barotropic warmup</a></li>
<li class="toctree-l5"><a class="reference internal" href="checklists.html#cbox-baroclinic-simulation">☐ Baroclinic simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="run_tests.html">Test Suite for Prechecking Runs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="run_tests.html#using-the-tests">Using the Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_tests.html#writing-run-tests">Writing Run Tests</a><ul>
<li class="toctree-l5"><a class="reference internal" href="run_tests.html#basics-of-testing">Basics of testing</a></li>
<li class="toctree-l5"><a class="reference internal" href="run_tests.html#test-fixtures">Test Fixtures</a></li>
<li class="toctree-l5"><a class="reference internal" href="run_tests.html#markers">Markers</a></li>
<li class="toctree-l5"><a class="reference internal" href="run_tests.html#what-to-test">What to test</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#output-files">Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="output.html">Output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="output.html#flavors-of-output">Flavors of output</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#what-you-should-plan-in-advance">What you should plan in advance</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#request-station-output">Request station output</a><ul>
<li class="toctree-l5"><a class="reference internal" href="output.html#station-in">station.in</a></li>
<li class="toctree-l5"><a class="reference internal" href="output.html#flow-xsects-yaml-and-fluxflags-out">flow_xsects.yaml and fluxflags.out</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="output.html#request-dense-output">Request dense output:</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#working-with-staout-files">Working with staout_ files</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#working-with-flux-out-files">Working with flux.out files</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#visualizing-dense-nc-output-in-visit">Visualizing dense (.nc) output in VisIt</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#schism-s-extraction-utilities">SCHISM’s extraction utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#quick-validation-plots">Quick validation plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html#where-do-we-keep-specialized-postprocessing-materials">Where do we keep specialized postprocessing materials?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#computing-resources">Computing Resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hpc.html">Intro to Clusters and High Performance Computing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#anatomy-of-a-cluster">Anatomy of a Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#figure-cluster-components">Figure: Cluster Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#compilation">Compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#job-submission">Job Submission</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#compute-nodes-and-message-passing">Compute Nodes and Message Passing</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#input-output-and-scribes">Input/Output and Scribes</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#example-slurm-launch-file">Example Slurm Launch File</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#example-shell-script-to-run-schism">Example Shell Script to Run SCHISM</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#intro-to-batch-cloud-cluster">Intro to Batch Cloud Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="hpc.html#figure-azure-batch-cluster-components">Figure: Azure Batch Cluster Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="azure.html">Running on Azure Batch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="azure.html#setup-azure">Setup Azure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="azure.html#download-azure-utilities">Download Azure Utilities</a></li>
<li class="toctree-l5"><a class="reference internal" href="azure.html#login">Login</a></li>
<li class="toctree-l5"><a class="reference internal" href="azure.html#create-a-resource-group">Create a Resource Group</a></li>
<li class="toctree-l5"><a class="reference internal" href="azure.html#download-azure-dms-batch">Download azure_dms_batch</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="azure.html#upload-applications">Upload Applications</a><ul>
<li class="toctree-l5"><a class="reference internal" href="azure.html#schism">SCHISM</a></li>
<li class="toctree-l5"><a class="reference internal" href="azure.html#python-packages">Python Packages</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="azure.html#file-transfer-commands">File Transfer Commands</a><ul>
<li class="toctree-l5"><a class="reference internal" href="azure.html#azcopy-commands">azcopy commands</a><ul>
<li class="toctree-l6"><a class="reference internal" href="azure.html#generating-sas-links">Generating SAS Links</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="azure.html#azcopy-options">azcopy options</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="azure.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="helloschism_azure.html">Step-by-step: HelloSCHISM on Azure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="helloschism_azure.html#initial-setup">Initial Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="helloschism_azure.html#uploading-model-input-files">Uploading Model Input Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="helloschism_azure.html#set-up-model-run-config">Set up Model Run Config</a><ul>
<li class="toctree-l5"><a class="reference internal" href="helloschism_azure.html#spot-pricing-config">Spot Pricing Config</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="helloschism_azure.html#ensure-batch-quota">Ensure Batch Quota</a></li>
<li class="toctree-l4"><a class="reference internal" href="helloschism_azure.html#run-simulation">Run Simulation!</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bds_guide_azure.html">Step-by-step: Bay-Delta SCHISM on Azure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="bds_guide_azure.html#initial-setup">Initial Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="bds_guide_azure.html#uploading-model-input-files">Uploading Model Input Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="bds_guide_azure.html#running-model-simulation">Running Model Simulation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="bds_guide_azure.html#simple-run-config">Simple Run Config</a></li>
<li class="toctree-l5"><a class="reference internal" href="bds_guide_azure.html#spot-pricing-config">Spot Pricing Config</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#advanced-tasks-and-concepts">Advanced Tasks and Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="problems.html">Common Problems and Diagnosis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="problems.html#where-does-schism-write-error-messages">Where does SCHISM write error messages?</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#my-run-says-segfault">My run says “segfault”</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#the-runs-seems-very-slow-compared-to-normal">The runs seems very slow compared to normal</a></li>
<li class="toctree-l4"><a class="reference internal" href="problems.html#dry-boundary">Dry boundary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="age.html">Simulating water age</a><ul>
<li class="toctree-l4"><a class="reference internal" href="age.html#compile-with-age">Compile with age</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#parameters-in-param-nml">Parameters in param.nml</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#additional-ic-files">Additional *.ic files</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#hotstart-considerations">Hotstart considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="age.html#typical-output-processing">Typical output processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sea_level_rise.html">Sea Level Rise</a></li>
<li class="toctree-l3"><a class="reference internal" href="sources.html">Sources, Sinks, Delta Channel Depletions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sources.html#identifying-source-locations-and-names-in-preprocessor">Identifying source locations and names in preprocessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#delta-and-suisun-channel-depletions">Delta and Suisun channel depletions</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#making-sure-you-includ-the-th-files-for-sources-sinks">Making sure you includ the th files for sources/sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="sources.html#tracer-concentrations">Tracer concentrations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="structures.html">Hydraulic Structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="structures.html#where-is-the-documentation">Where is the documentation?</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#setting-up-the-mesh-to-make-structures-easy">Setting up the mesh to make structures easy</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#preventing-dry-boundary-messages">Preventing dry boundary messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="structures.html#important-bay-delta-examples">Important Bay-Delta examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mesh.html">Gridding the Horizontal Mesh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#meshing">Meshing</a><ul>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#meshing-considerations-for-schism">Meshing considerations for SCHISM</a><ul>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#video-joseph-zhang-schism-summit">Video (Joseph Zhang, SCHISM summit)</a></li>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#recap-checklist">Recap/checklist</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#getting-to-know-sms">Getting to know SMS</a><ul>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#sample-data">Sample Data</a></li>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#id1">Recap checklist</a></li>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#presentation-clip-dems-and-efficient-use-of-dems">Presentation: clip_dems and efficient use of DEMS</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#building-the-bay-delta-mesh-the-standard-way">Building the Bay-Delta mesh the standard way</a></li>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#presentation-meshing-consideration-for-marshes-and-restoration">Presentation: Meshing consideration for marshes and restoration</a></li>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#merging-stitching-sms-mesh-maps-new-work-flooded-islands-etc">Merging/Stitching SMS mesh/maps (new work, flooded islands, etc)</a><ul>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#video">Video</a></li>
<li class="toctree-l6"><a class="reference internal" href="mesh.html#id2">Recap/checklist</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#vertical-mesh-setup">Vertical mesh setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#checklist-for-after-you-change-the-mesh">Checklist for after you change the mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="mesh.html#performance-tuning">Performance Tuning</a><ul>
<li class="toctree-l5"><a class="reference internal" href="mesh.html#the-analyze-dt-utility">The analyze_dt Utility</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utilities and Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#gis-conversion">GIS Conversion</a><ul>
<li class="toctree-l5"><a class="reference internal" href="utilities.html#mesh-to-shapefile">Mesh to shapefile</a></li>
<li class="toctree-l5"><a class="reference internal" href="utilities.html#polygons-to-from-shapefile">Polygons to/from shapefile</a></li>
<li class="toctree-l5"><a class="reference internal" href="utilities.html#polylines-to-from-shapefile">Polylines to/from shapefile</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#hotstart-inventory-convert-iteration-numbers-to-dates">Hotstart Inventory: Convert iteration numbers to dates</a></li>
<li class="toctree-l4"><a class="reference internal" href="utilities.html#model-time-and-multi-clip">model_time and multi_clip</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../learning.html">Learning Resources for Bay-Delta SCHISM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#general-resources-and-tools">General Resources and Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bay_delta_tutorials.html">Bay-Delta SCHSIM Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linux.html">Linux Hints for SCHISM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#using-linux-from-windows">Using Linux from Windows</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../linux.html#basic-connection">Basic connection</a></li>
<li class="toctree-l5"><a class="reference internal" href="../linux.html#copying-files">Copying files</a></li>
<li class="toctree-l5"><a class="reference internal" href="../linux.html#xwindow-emulation">XWindow Emulation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../linux.html#all-in-one-mobaxterm">All-in-one: MobaXTerm</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#copying-a-run-safely">Copying a Run Safely</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../linux.html#special-case-remote-computer-using-rsa-keys">Special Case: Remote Computer Using RSA Keys</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#symbolic-links">Symbolic links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#archives-and-tarballs">Archives and Tarballs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../linux.html#essential-commands-in-a-schism-context">Essential commands in a SCHISM context</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#manuals">Manuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../learning.html#vims-and-other-external-resources">VIMS and Other External Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#linux">Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#how-it-works">How it works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#local-html-pages">Local html pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation.html#github-pages">GitHub Pages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation.html#examples-and-concepts">Examples and Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_sphinx.html">Sphinx Documentation Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#code-auto-documentation">Code Auto-Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#headings-order">Headings order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#baydeltaschism-specifics">BayDeltaSCHISM Specifics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_sphinx.html#sphinx-examples">Sphinx examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#math">Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#figures">Figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#diagrams">Diagrams</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_sphinx.html#sphinx-mermaid-directive">Sphinx Mermaid Directive</a></li>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_sphinx.html#embedding-charts-with-svg">Embedding Charts with SVG</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_sphinx.html#embedding-videos">Embedding Videos</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_mermaid.html">Mermaid Chart Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#baydeltaschism-standards">BayDeltaSCHISM Standards</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_mermaid.html#symbols">Symbols</a></li>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_mermaid.html#style">Style</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#vs-code-plugin">VS Code plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meta_doc/doc_mermaid.html#cool-stuff">Cool stuff</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_mermaid.html#clickables">Clickables</a></li>
<li class="toctree-l5"><a class="reference internal" href="../meta_doc/doc_mermaid.html#icons-in-an-element">Icons in an Element</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../meta_doc/doc_click.html">Click Documentation Principles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../calibration.html">Calibration Report and References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../calibration.html#calibration">Calibration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html#support">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bdschism.html">bdschism package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.config.html">bdschism.config package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bdschism.config.html#module-bdschism.config">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.analyze_dt">bdschism.analyze_dt module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.analyze_dt.load_data"><code class="docutils literal notranslate"><span class="pre">load_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.analyze_dt.plot_summarized_bad_actors"><code class="docutils literal notranslate"><span class="pre">plot_summarized_bad_actors()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.analyze_dt.summarize_elements"><code class="docutils literal notranslate"><span class="pre">summarize_elements()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.calc_ndoi">bdschism.calc_ndoi module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.calc_ndoi.calc_indoi"><code class="docutils literal notranslate"><span class="pre">calc_indoi()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.ccf_gate_height">bdschism.ccf_gate_height module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.ccf_gate"><code class="docutils literal notranslate"><span class="pre">ccf_gate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.create_priority_series"><code class="docutils literal notranslate"><span class="pre">create_priority_series()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.draw_down_regression"><code class="docutils literal notranslate"><span class="pre">draw_down_regression()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.export_lookup"><code class="docutils literal notranslate"><span class="pre">export_lookup()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.flow_to_max_gate"><code class="docutils literal notranslate"><span class="pre">flow_to_max_gate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.flow_to_priority"><code class="docutils literal notranslate"><span class="pre">flow_to_priority()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.gen_gate_height"><code class="docutils literal notranslate"><span class="pre">gen_gate_height()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.gen_prio_for_varying_exports"><code class="docutils literal notranslate"><span class="pre">gen_prio_for_varying_exports()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.get_export_ts"><code class="docutils literal notranslate"><span class="pre">get_export_ts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.get_tidal_hh_lh"><code class="docutils literal notranslate"><span class="pre">get_tidal_hh_lh()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.get_tidal_ll_hl"><code class="docutils literal notranslate"><span class="pre">get_tidal_ll_hl()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.make_3_prio"><code class="docutils literal notranslate"><span class="pre">make_3_prio()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.predict_oh4_level"><code class="docutils literal notranslate"><span class="pre">predict_oh4_level()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.process_height"><code class="docutils literal notranslate"><span class="pre">process_height()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.radial_gate_flow"><code class="docutils literal notranslate"><span class="pre">radial_gate_flow()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.raidal_gate_flow_ts"><code class="docutils literal notranslate"><span class="pre">raidal_gate_flow_ts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.remove_continuous_duplicates"><code class="docutils literal notranslate"><span class="pre">remove_continuous_duplicates()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.save_prio_ts"><code class="docutils literal notranslate"><span class="pre">save_prio_ts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.sffpx_level"><code class="docutils literal notranslate"><span class="pre">sffpx_level()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.simple_mass_balance"><code class="docutils literal notranslate"><span class="pre">simple_mass_balance()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.tlmax"><code class="docutils literal notranslate"><span class="pre">tlmax()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.ccf_gate_height.tlmin"><code class="docutils literal notranslate"><span class="pre">tlmin()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.create_sflux_links">bdschism.create_sflux_links module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.diff_gr3">bdschism.diff_gr3 module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.diff_gr3.diff_congruent_gr3"><code class="docutils literal notranslate"><span class="pre">diff_congruent_gr3()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.generate_realtime_elev2d">bdschism.generate_realtime_elev2d module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.generate_realtime_elev2d.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.generate_realtime_elev2d.stitch_station"><code class="docutils literal notranslate"><span class="pre">stitch_station()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.hotstart_date">bdschism.hotstart_date module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.hotstart_date.set_hotstart_date"><code class="docutils literal notranslate"><span class="pre">set_hotstart_date()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.hotstart_from_hotstart">bdschism.hotstart_from_hotstart module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.hotstart_from_hotstart.hotstart_newgrid"><code class="docutils literal notranslate"><span class="pre">hotstart_newgrid()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.hotstart_from_hotstart.str_or_path"><code class="docutils literal notranslate"><span class="pre">str_or_path()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.hotstart_nudging_data">bdschism.hotstart_nudging_data module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.hotstart_nudging_data.hotstart_nudge_data"><code class="docutils literal notranslate"><span class="pre">hotstart_nudge_data()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.parse_cu">bdschism.parse_cu module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.adjust_src_sink"><code class="docutils literal notranslate"><span class="pre">adjust_src_sink()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_net_calsim"><code class="docutils literal notranslate"><span class="pre">calc_net_calsim()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_net_diff"><code class="docutils literal notranslate"><span class="pre">calc_net_diff()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_net_dsm2"><code class="docutils literal notranslate"><span class="pre">calc_net_dsm2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_net_obs_schism"><code class="docutils literal notranslate"><span class="pre">calc_net_obs_schism()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_net_schism"><code class="docutils literal notranslate"><span class="pre">calc_net_schism()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.calc_srcsnk_dsm2"><code class="docutils literal notranslate"><span class="pre">calc_srcsnk_dsm2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.orig_pert_to_schism_dcd"><code class="docutils literal notranslate"><span class="pre">orig_pert_to_schism_dcd()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.orig_pert_to_schism_dcd_yaml"><code class="docutils literal notranslate"><span class="pre">orig_pert_to_schism_dcd_yaml()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.read_net_csv"><code class="docutils literal notranslate"><span class="pre">read_net_csv()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.sch_dcd_net_diff"><code class="docutils literal notranslate"><span class="pre">sch_dcd_net_diff()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.parse_cu.strip_dpart"><code class="docutils literal notranslate"><span class="pre">strip_dpart()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#bdschism-plot-input-boundaries-module">bdschism.plot_input_boundaries module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#bdschism-port-boundary-module">bdschism.port_boundary module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.profile_plot">bdschism.profile_plot module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.profile_plot.get_index_bounds"><code class="docutils literal notranslate"><span class="pre">get_index_bounds()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.profile_plot.nearest_neighbor_fill"><code class="docutils literal notranslate"><span class="pre">nearest_neighbor_fill()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.profile_plot.profile_plot"><code class="docutils literal notranslate"><span class="pre">profile_plot()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.profile_plot.set_index_bounds"><code class="docutils literal notranslate"><span class="pre">set_index_bounds()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.profile_plot.vertical_fill"><code class="docutils literal notranslate"><span class="pre">vertical_fill()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.run_sequence">bdschism.run_sequence module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.set_nudging">bdschism.set_nudging module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.set_nudging.get_nudge_list"><code class="docutils literal notranslate"><span class="pre">get_nudge_list()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.set_nudging.parse_var_map"><code class="docutils literal notranslate"><span class="pre">parse_var_map()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.set_nudging.set_nudging"><code class="docutils literal notranslate"><span class="pre">set_nudging()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.settings">bdschism.settings module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.settings.create_link"><code class="docutils literal notranslate"><span class="pre">create_link()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.settings.get_settings"><code class="docutils literal notranslate"><span class="pre">get_settings()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.three_point_linear_norm">bdschism.three_point_linear_norm module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.three_point_linear_norm.ThreePointLinearNorm"><code class="docutils literal notranslate"><span class="pre">ThreePointLinearNorm</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bdschism.html#bdschism.three_point_linear_norm.ThreePointLinearNorm.autoscale"><code class="docutils literal notranslate"><span class="pre">ThreePointLinearNorm.autoscale()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../bdschism.html#bdschism.three_point_linear_norm.ThreePointLinearNorm.autoscale_None"><code class="docutils literal notranslate"><span class="pre">ThreePointLinearNorm.autoscale_None()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../bdschism.html#bdschism.three_point_linear_norm.ThreePointLinearNorm.inverse"><code class="docutils literal notranslate"><span class="pre">ThreePointLinearNorm.inverse()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../bdschism.html#bdschism.three_point_linear_norm.ThreePointLinearNorm.scaled"><code class="docutils literal notranslate"><span class="pre">ThreePointLinearNorm.scaled()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.uv3d">bdschism.uv3d module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.uv3d.interpolate_uv3d"><code class="docutils literal notranslate"><span class="pre">interpolate_uv3d()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.x2_buildpoints">bdschism.x2_buildpoints module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_buildpoints.create_arg_parser"><code class="docutils literal notranslate"><span class="pre">create_arg_parser()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_buildpoints.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_buildpoints.main_fixed"><code class="docutils literal notranslate"><span class="pre">main_fixed()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_buildpoints.x2_route2_bp"><code class="docutils literal notranslate"><span class="pre">x2_route2_bp()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.x2_time_series">bdschism.x2_time_series module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.create_arg_parser"><code class="docutils literal notranslate"><span class="pre">create_arg_parser()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.default_outname"><code class="docutils literal notranslate"><span class="pre">default_outname()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.find_x2"><code class="docutils literal notranslate"><span class="pre">find_x2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.get_start_date_from_param"><code class="docutils literal notranslate"><span class="pre">get_start_date_from_param()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.main_hardwire"><code class="docutils literal notranslate"><span class="pre">main_hardwire()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.x2_time_series.process_x2"><code class="docutils literal notranslate"><span class="pre">process_x2()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism.zone_utils">bdschism.zone_utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.face_aver"><code class="docutils literal notranslate"><span class="pre">face_aver()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.face_aver_inst"><code class="docutils literal notranslate"><span class="pre">face_aver_inst()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.fill_ele_area"><code class="docutils literal notranslate"><span class="pre">fill_ele_area()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.fill_ele_area510"><code class="docutils literal notranslate"><span class="pre">fill_ele_area510()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.gen_node_neibor_ele"><code class="docutils literal notranslate"><span class="pre">gen_node_neibor_ele()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.gen_node_wet_dry"><code class="docutils literal notranslate"><span class="pre">gen_node_wet_dry()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.quad_area"><code class="docutils literal notranslate"><span class="pre">quad_area()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bdschism.html#bdschism.zone_utils.triangle_area"><code class="docutils literal notranslate"><span class="pre">triangle_area()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bdschism.html#module-bdschism">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bay-Delta SCHISM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of env/lib/python3.8/site-packages/sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vignette-hindcast-bay-delta-schism-at-delta-modeling-section-with-preprocessor">
<span id="bdschinstr"></span><h1>Vignette: Hindcast Bay Delta SCHISM at Delta Modeling Section with Preprocessor<a class="headerlink" href="#vignette-hindcast-bay-delta-schism-at-delta-modeling-section-with-preprocessor" title="Link to this heading"></a></h1>
<p>The process for starting a Bay Delta SCHISM run from scratch involves some pre-processing work on a Windows machine using the schimpy library (<a class="reference external" href="https://github.com/CADWRDeltaModeling/schimpy">https://github.com/CADWRDeltaModeling/schimpy</a>).</p>
<p>You’ll want to have a conda environment which has the latest version of schimpy in it. For this example that environment is called ‘schism’.</p>
<section id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Clone the Bay Delta Schism repository to your Windows machine (ex: D:/schism/bdsch_scratch)</p>
<ul class="simple">
<li><p>git clone <a class="reference external" href="https://github.com/CADWRDeltaModeling/BayDeltaSCHISM.git">https://github.com/CADWRDeltaModeling/BayDeltaSCHISM.git</a> (creates a BayDeltaSCHISM folder within bdsch_scratch)</p></li>
<li><p>if already cloned, then pull updates to the repository</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git pull</span>
</pre></div>
</div>
</li>
<li><p>Create a directory on Windows where you’ll build model inputs (“./baydeltainputs”) and copy the following files into it:</p>
<ul class="simple">
<li><dl class="simple">
<dt>From “./BayDeltaSCHISM”:</dt><dd><ul>
<li><p>“./BayDeltaSCHISM/templates/bay_delta” folder contents</p></li>
<li><p>“./BayDeltaSCHISM/data/flow_station_xsects.yaml”</p></li>
<li><p>“./BayDeltaSCHISM/data/stations” folder contents</p></li>
<li><p>“./BayDeltaSCHISM/scripts/multi_clip.py”</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>You’ll need a .2dm file for the pre-processor, copy this into the baydeltainputs folder</p></li>
<li><dl class="simple">
<dt>Launch file for submitting jobs</dt><dd><ul>
<li><dl class="simple">
<dt>Download <a class="reference external" href="https://github.com/CADWRDeltaModeling/BayDeltaSCHISM/blob/master/examples/linux/launch.pbs">launch.pbs</a></dt><dd></dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Shell script file for running SCHISM binary</dt><dd><ul>
<li><dl class="simple">
<dt>Download <a class="reference external" href="https://github.com/CADWRDeltaModeling/BayDeltaSCHISM/blob/master/examples/linux/schism.sh">schism.sh</a></dt><dd></dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Download <a class="reference external" href="https://github.com/CADWRDeltaModeling/dms_datastore/blob/master/dms_datastore/example/noaa_stations.txt">noaa_stations.txt</a></dt><dd></dd>
</dl>
</li>
</ul>
</li>
<li><p>Edit input files</p>
<ul>
<li><dl class="simple">
<dt>If modifying the bathymetric data create a copy of ‘dem_4.2_cc.yaml’ and rename it</dt><dd><ul class="simple">
<li><p>correctly locate the Dutch Slough DEM</p></li>
<li><p>Suppy additional DEM data</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>main_bay_delta.yaml</dt><dd><ul>
<li><p>change mesh_inputfile: parameter to match the .2dm file you copied into the project folder</p></li>
<li><dl class="simple">
<dt>check that the vgrid: section contains a vgrid_version: variable set to the SCHISM version being used (5.8 or 5.10)</dt><dd><ul class="simple">
<li><p>ex: vgrid_version: ‘5.10’ # Note that quotation marks are necessary</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>If you’ve modified the bathymetric data, then update the dem yaml file to that .yaml file</p></li>
<li><p>Add these lines above the sav_*.gr3 specifications:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sav_cd.gr3:
   default: 1.13
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>sav_density.yaml</dt><dd><ul class="simple">
<li><p>change “W:/sav” to “//nasbdo/Modeling_Data/sav” for all cases where “W:/sav” is found</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>multi_clip.py</dt><dd><ul>
<li><p>Set the following variables according to your simulation start date (this example uses May 1, 2009)</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>start=dtm.datetime(2009,5,1)
bds_home = &quot;&lt;BAYDELTASCHISM REPOSITORY LOCATION&gt;&quot;
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>launch.tropic.pbs &amp; launch.clinic.pbs</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>#PBS -N &lt;SIMULATION NAME&gt;</dt><dd><ul>
<li><p>ex: #PBS -N v112_demo</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>#PBS -M &lt;USER EMAIL&gt;, &lt;USER&gt;&#64;localhost</dt><dd><ul>
<li><p>ex: #PBS -M <a class="reference external" href="mailto:jane&#46;doe&#37;&#52;&#48;water&#46;ca&#46;gov">jane<span>&#46;</span>doe<span>&#64;</span>water<span>&#46;</span>ca<span>&#46;</span>gov</a>,janedoe&#64;localhost</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>schism.sh</dt><dd><ul class="simple">
<li><p>Set the last line to be the location of your compiled pschism build followed by the number 10</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>param.nml.tropic &amp; param.nml.clinic</dt><dd><ul class="simple">
<li><p>Set start_year, start_month, start_day, start_hour, and utc_start according to the simulation start date</p></li>
<li><p>Edit byear, eyear, bmonth, emonth, bday, eday to have the full date range of the simulation</p></li>
<li><p>Edit rnday for runtime</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>make_links_full.py</dt><dd><ul class="simple">
<li><p>check src_dir and src_dir_narr</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
<li><p>Run files:</p>
<ul class="simple">
<li><dl class="simple">
<dt>multi_clip.py</dt><dd><ul>
<li><p>Creates a list of .th files necessary for the run to execute found in simulation directory</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>In a conda environment with schimpy installed, go to simulation directory and run:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">prepare_schism main_bay_delta.yaml</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create station inputs using:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">station --station_db station_dbase.csv --subloc_db station_subloc.csv --request all</span>
</pre></div>
</div>
</li>
<li><p>Create Hotstart and Nudging datasets</p>
<ul class="simple">
<li><p>If you’re only running a 2D/Barotropic simulation then you don’t need to create these files!</p></li>
<li><dl class="simple">
<dt>Create a sub-folder (./baydeltainputs/hotstart) and copy files:</dt><dd><ul>
<li><p>hotstart_nudging_data.py</p></li>
<li><p>hotstart_lat.py</p></li>
<li><p>clean_nudge.py</p></li>
<li><p>clean_polaris.py</p></li>
<li><p>hotstart.yaml</p></li>
<li><p>nudging.yaml</p></li>
<li><p>nudge_roms/nudge_obs_roms.yaml</p></li>
<li><p>nudge_roms/roms_nudge.py</p></li>
<li><p>shapefile/RegionsPolygon.*</p></li>
<li><p>USGS_polaris_station_locations_xy.csv</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These files don’t exist somewhere publicly available yet</p>
</div>
<ul>
<li><dl class="simple">
<dt>Download Polaris *.csv data from the USGS data query <a class="reference external" href="https://sfbay.wr.usgs.gov/water-quality-database/">https://sfbay.wr.usgs.gov/water-quality-database/</a></dt><dd><ul class="simple">
<li><p>Since the hotstart generates based on a USGS cruise, check “//nasbdo/Modeling_Data/usgs_cruise/cruise_inventory.csv” to see what dates are available. You’ll want your hotstart date to be near an available cruise date</p></li>
<li><p>Go to year, show all entries, and export data</p></li>
<li><p>Save as: hotstartUSGS_2009_saltemp.csv (where 2009 is whichever year you’ve downloaded)</p></li>
<li><dl class="simple">
<dt>Run <em>clean_polaris.py</em> or some other QA/QC on the USGS_2009_saltemp.csv file</dt><dd><ul>
<li><p>This creates a copy of the file with _edit.csv as the extension</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>Edit files:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>hotstart_nudging_data.py</dt><dd><ul>
<li><dl class="simple">
<dt>Change nudging time to desired model run length</dt><dd><ul>
<li><p>ex: nudgelen=days(60)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Set start time</dt><dd><ul>
<li><p>ex: t0=pd.Timestamp(2009,5,1)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>hotstart.yaml</dt><dd><ul>
<li><p>Point to correct hgrid and vgrid _input files (../hgrid.gr3 &amp; ../vgrid.in.3d generated from prepare_schism)</p></li>
<li><p>For all data using “extrude_casts:” method, replace with ./USGS_2009_saltemp_edit.csv</p></li>
<li><p>For all data using “obs_points:” method, replace with “./hotstart_data_{temperature/salinity}.csv” and variable: {temperature/salinity} depending on whether looking to set temperature or salinity. These files will be generated with  hotstart_nudging_data.py</p></li>
<li><p>Set vgrid_version=’5.10’ # Note that the quotation marks are important</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nudging.yaml</dt><dd><ul>
<li><dl class="simple">
<dt>Change run days to whatever number of days you want the internal points to be nudged towards observation data</dt><dd><ul>
<li><p>ex: rnday: 7</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Set vgrid_version=’5.10’</p></li>
<li><p>Change temperature/salinity data: ./nudging_data_{temperature/salinity}_edit.csv based on which variable you’re setting</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nudge_roms/nudge_obs_roms.yaml</dt><dd><ul>
<li><p>start_date: 2009-05-01 (or whatever your start date is)</p></li>
<li><p>rnday: 60</p></li>
<li><p>Point to correct hgrid/vgrid files (../hgrid.gr3 &amp; ../vgrid.in.3d)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>hotstart_lat.py</dt><dd><ul>
<li><p>Set vgrid_version=’5.10’</p></li>
<li><p>Set hgrid and vgrid to same filenames as hotstart.yaml (../hgrid.gr3 &amp; ../vgrid.in.3d)</p></li>
<li><p>Set ini_date to correct start date</p></li>
<li><p>Set hotstart_fn to appropriate filename (ex: hotstart.20090501.nc or whatever your start date is)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Run files:</p>
<blockquote>
<div><ul class="simple">
<li><p>You’ll want to run these files in a conda environment that has dms_datastore installed (There’s an existing environment.yaml file which will set this up for you)</p></li>
<li><p>This might be better to run on Linux/HPC4 so that your machine doesn’t interrupt the files and corrupt the .nc files these scripts produce</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The environment.yaml file does not exist somewhere publicly available yet</p>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>hotstart_nudging_data.py</dt><dd><ul>
<li><p>Takes quite a long time, if the time period hasn’t changed then this step does not need to be repeated</p></li>
<li><dl class="simple">
<dt>Need to QA/QC hotstart and nudging csv data</dt><dd><ul>
<li><p>Run clean_nudge.py to create nudging_data_{temperature/salinity}_edit.csv</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>hotstart.py</dt><dd><ul>
<li><dl class="simple">
<dt>Creates:</dt><dd><ul>
<li><dl class="simple">
<dt>salinity_nudge.gr3</dt><dd><ul>
<li><p>temperature_nudge.gr3</p></li>
<li><p>hotstart.20090501.nc</p></li>
<li><p>SAL_nu_obsroms.nc</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nudge_roms/roms_nudge.py</dt><dd><ul>
<li><p>Takes a very long time. If the time period <em>or</em> grid hasn’t changed then this step does not need to be repeated</p></li>
<li><p>Rename SAL_nu_obsroms.nc and TEM_nu_obsroms.nc to be SAL_nu_roms.nc and TEM_nu_roms.nc</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>Copy output files out to the main simulation folder (./baydeltainputs)</dt><dd><ul class="simple">
<li><p>hotstart/TEM_nu_obsroms.nc</p></li>
<li><p>hotstart/SAL_nu_obsroms.nc</p></li>
<li><p>hotstart/temperature_nudge.gr3</p></li>
<li><p>hotstart/salinity_nudge.gr3</p></li>
<li><p>hotstart/hotstart.20090501.nc</p></li>
<li><p>hotstart/hgrid.nc</p></li>
<li><p>hotstart/nudge_roms/TEM_nu_roms.nc</p></li>
<li><p>hotstart/nudge_roms/SAL_nu_roms.nc</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
</ol>
</section>
<section id="linux">
<h2>Linux<a class="headerlink" href="#linux" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Create the folder where you will be running the model (ex: /scratch/dms/{username}/schism/bdsch_scratch_demo)</p>
<ul class="simple">
<li><p>from your Windows machine, copy “./baydeltainputs” contents into your Linux model folder (bdsch_scratch_demo)</p></li>
</ul>
</li>
</ol>
<section id="barotropic">
<h3>Barotropic<a class="headerlink" href="#barotropic" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Make symbolic links for sflux files</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>mkdir sflux</dt><dd><ul>
<li><p>cd sflux</p></li>
<li><p>python ../make_links_full.py</p></li>
<li><p>cd ..</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ol>
<p>Then you’ll need a sflux_inputs.txt file within the sflux folder</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The sflux_inputs.txt file does not exist somewhere publicly available yet</p>
</div>
<ol class="arabic">
<li><p>Create elev2d.th.nc file. Run in Linux conda environment with dms_datastore and schimpy installed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">download_noaa --syear 2009 --eyear 2009 --param water_level noaa_stations.txt</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Adjust start and end year based on simulation period</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gen_elev2d --outfile elev2D.th.nc --hgrid=hgrid.gr3 --stime=2009-5-1 --etime=2009-7-1 --slr 0.0 noaa_download/noaa_pryc1_9415020_water_level_2009_2010.csv noaa_download/noaa_mtyc1_9413450_water_level_2009_2010.csv</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Again, be mindful of the years in the filenames as well as the stime and etime inputs</p></li>
</ul>
</li>
<li><p>Make symbolic links for the Barotropic run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ln -sf bctides.in.2d bctides.in</span>
<span class="go">ln -sf vgrid.in.2d vgrid.in</span>
<span class="go">ln -sf msource_v20220825.th msource.th</span>
<span class="go">ln -sf vsource_20220825_nows_leach1.th vsource.th</span>
<span class="go">ln -sf vsink_20220825_nows_leach1_sscd1.5.th vsink.th</span>
<span class="go">ln -sf TEM_1.th temp.th</span>
<span class="go">ln -sf SAL_1.th salt.th</span>
<span class="go">ln -sf param.nml.tropic param.nml</span>
<span class="go">ln -sf launch.tropic.pbs launch.pbs</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Make the outputs directory</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir outputs</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Run barotropic model</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qsub launch.pbs</span>
</pre></div>
</div>
</li>
</ol>
<p>This will run the Barotropic model without nudging or hotstart data and then you will use the Barotropic results to generate a flow boundary at the ocean in order to stabilize perturbations in the model.</p>
</section>
<section id="baroclinic">
<h3>Baroclinic<a class="headerlink" href="#baroclinic" title="Link to this heading"></a></h3>
<p>This needs to follow the completion of a Barotropic simulation in order to create the ocean boundary flows. At this stage the hotstart and nudging files created in the Windows portion are used on the temperature and salinity fields.</p>
<blockquote>
<div><ol class="arabic">
<li><p>Rename the <em>outputs</em> folder to <em>outputs.tropic</em> and create a new empty <em>outputs</em> folder</p></li>
<li><p>Create uv3d.th.nc</p>
<ul>
<li><dl>
<dt>In <em>outputs.tropic</em></dt><dd><ul class="simple">
<li><p>Copy <em>interpolate_variables.in</em> to <em>outputs.tropic</em> folder</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The interpolate_variables.in file does not exist somewhere publicly available yet</p>
</div>
<ul class="simple">
<li><p>Create symbolic links</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ln -sf ../hgrid.gr3 bg.gr3</span>
<span class="go">ln -sf ../hgrid.gr3.fg.gr3</span>
<span class="go">ln -sf ../vgrid.in.2d vgrid.bg</span>
<span class="go">ln -sf ../vgrid.in.3d vgrid.fg</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Run script to create <em>uv3d.th.nc</em> in a conda environment with schimpy</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">module purge</span>
<span class="go">module load schism/5.10_intel2022.1</span>
<span class="go">ulimit -s unlimited</span>
<span class="go">interpolate_variables8</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Copy the <em>uv3d.th.nc</em> file to the main folder</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
<li><p>Create symbolic links back in the main simulation folder</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ln -sf hotstart.20090501.nc hotstart.nc</span>
<span class="go">ln -sf SAL_nu_obsroms.nc SAL_nu.nc</span>
<span class="go">ln -sf TEM_nu_obsroms.nc TEM_nu.nc</span>
<span class="go">ln -sf salinity_nudge.gr3 SAL_nudge.gr3</span>
<span class="go">ln -sf temperature_nudge.gr3 TEM_nudge.gr3</span>
<span class="go">ln -sf param.nml.clinic param.nml</span>
<span class="go">ln -sf bctides.in.3d bctides.in</span>
<span class="go">ln -sf vgrid.in.3d vgrid.in</span>
<span class="go">ln -sf launch.clinic.pbs launch.pbs</span>
</pre></div>
</div>
</li>
<li><p>Run model for period which the internal salinity/temperature nudging runs (in this example, the model will stop after 7 days)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qsub launch.pbs</span>
</pre></div>
</div>
</li>
<li><p>After model stops, need to restart from hotstart outputs from the previous run</p>
<ul class="simple">
<li><p>Run combine_hotstart7 on last timestep output to hotstart within the outputs</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">combine_hotstart7.exe --iteration 4800</span>
</pre></div>
</div>
<p>Note that the iteration variable is based on variables in param.nml <em>nhot_write</em> which is set to 4800 in this example. 4800 x <em>dt</em> = 4800 x 90s = 5 days</p>
<ul class="simple">
<li><p>Change links to hotstart and nudging data</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ln -sf outputs/hotstart_it\=4800.nc hotstart.nc</span>
<span class="go">ln -sf SAL_nu_roms.nc SAL_nu.nc</span>
<span class="go">ln -sf TEM_nu_roms.nc TEM_nu.nc</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Edit param.nml.clinic</dt><dd><ul>
<li><p>Change ihot to <em>ihot = 2</em> to start outputs from the timestep in the new hotstart file</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Run the model</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qsub launch.pbs</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview of a Bay-Delta SCHISM Run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="files_and_directories.html" class="btn btn-neutral float-right" title="Required Files, Directory Structure and Recommended Study Practices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014,2020 California Department of Water Resources.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: white;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #86989B; /* existing theme was AFC1C4 and 86989B and CA7900 and white */
      
    }
  </style>


</body>
</html>